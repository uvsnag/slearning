(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72066,e=>{"use strict";var t=e.i(80744);function n(e,t,n){return Math.min(n,Math.max(t,e))}function s(){return"speechSynthesis"in window?window.speechSynthesis.getVoices():[]}function i(e){if(e&&"undefined"!=typeof navigator)try{let e=navigator;e.audioSession&&"playback"!==e.audioSession.type&&(e.audioSession.type="playback")}catch{}}function l(e){let[l,r]=(0,t.useState)(s),[a,o]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),d="speechSynthesis"in window,h=(0,t.useRef)(!1),m=(0,t.useMemo)(()=>"undefined"!=typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),[]);(0,t.useEffect)(()=>{if(!d)return;let e=window.speechSynthesis,t=()=>{r(e.getVoices())};return t(),e.addEventListener("voiceschanged",t),()=>{e.removeEventListener("voiceschanged",t)}},[d]),(0,t.useEffect)(()=>{if(!d||!m)return;let e=()=>i(m);return e(),document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[d,m]),(0,t.useEffect)(()=>{if(!d||!m)return;let e=()=>{if(h.current)return;h.current=!0,i(m);let e=window.speechSynthesis,t=new window.SpeechSynthesisUtterance(" ");t.volume=0,t.rate=1,t.lang="en-US",e.speak(t)};return window.addEventListener("touchstart",e,{once:!0,passive:!0}),window.addEventListener("click",e,{once:!0,passive:!0}),()=>{window.removeEventListener("touchstart",e),window.removeEventListener("click",e)}},[d,m]);let p=(0,t.useCallback)(t=>{if(!d)return;let n=window.speechSynthesis;t.onstart=()=>{o(!0),u(!1)},t.onend=()=>{o(!1),u(!1),e?.onEnd?.()},t.onerror=()=>{o(!1),u(!1)};let s=()=>{i(m),n.speak(t)};(n.speaking||n.pending)&&n.cancel(),m?window.setTimeout(s,140):s()},[d,e,m]),v=(0,t.useCallback)(()=>{d&&(window.speechSynthesis.cancel(),o(!1),u(!1))},[d]),g=(0,t.useCallback)(()=>{d&&a&&(window.speechSynthesis.pause(),u(!0))},[d,a]),f=(0,t.useCallback)(()=>{d&&c&&(i(m),window.speechSynthesis.resume(),u(!1))},[d,c,m]),y=(0,t.useCallback)((e,t,s)=>{if(!d)return;let i=(e||"").trim();if(!i)return;let r=Number(s?.voice??0),a=Number.isFinite(r)?l[r]:void 0,o=t?"en":"vi",c=l.find(e=>e.lang?.toLowerCase().startsWith(o)),u=new window.SpeechSynthesisUtterance(i);u.voice=a??c??null,u.lang=u.voice?.lang||(t?"en-US":"vi-VN"),u.rate=n(Number(s?.rate??.6),.1,10),u.volume=n(Number(s?.volume??1),0,1),p(u)},[d,l,p]);return{speak:p,speakText:y,cancel:v,pause:g,resume:f,speaking:a,paused:c,supported:d,voices:l}}e.s(["useSpeechSynthesis",()=>l])},97013,e=>{"use strict";var t=e.i(80642),n=e.i(28337);let s=(e,n,s)=>{let i=!1,l=[],r=n.split(""),a=e.split("");console.log("inputAns:",e);let o=0,c=0;for(;o<a.length+s;){let e={index:o,char:a[c],type:""};if((0,t.isEqualStr)(r[o],a[c],!0))e.type=0;else if(!1===i&&s>0){for(let t=0;t<s;t++)e.type=1,e.char="_",l.push(e),o+=1;i=!0;continue}else e.type=1;a[c]&&l.push(e),o++,c++}return r.length>a.length&&l.push({index:l.length,char:"_",type:1}),l};e.s(["TYPE_CORRECT",0,0,"TYPE_WRONG",0,1,"arrStrCheckToStr",0,e=>{let t="";for(let s=0;s<e.length;s++){let i=e[s];n.default.isEqual(null,i.type)||(n.default.isEqual(i.type,0)?t+="<span class ='ans-check-right'>":n.default.isEqual(i.type,1)?t+="<span class ='ans-check-wrong'>":n.default.isEqual(i.type,2)&&(t+="<span class ='ans-check-hint'>")),t+=i.char}return t+"</span>"},"autoCorrectLetter",0,(e,i)=>{let l=document.getElementById(e).value,r=s(l,i,0);for(let s=0;s<r.length;s++)if(n.default.isEqual(r[s].type,1)){l=(0,t.setCharAt)(l,s,i.substring(s,s+1)),document.getElementById(e).value=l;break}return r},"genHintStrAns",0,(e,t)=>{let i=s(document.getElementById(e).value,t,0);for(let e=0;e<i.length;e++)if(n.default.isEqual(i[e].type,1)){let n=t.substring(e,e+1);i[e].type=2,i[e].char=n;break}return i},"validateArrStrCheck",0,s])},17953,e=>{"use strict";var t=e.i(71866),n=e.i(80744),s=e.i(97968),i=e.i(72066),l=e.i(80642),r=e.i(97013),a=e.i(28337);let o=[],c=-1,u="";e.s(["default",0,()=>{let[e,d]=(0,n.useState)(0),{speak:h,voices:m}=(0,i.useSpeechSynthesis)(),[p,v]=(0,n.useState)(1),[g,f]=(0,n.useState)(""),[y,E]=(0,n.useState)(""),b=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=document.getElementById("numbWord"),t=document.getElementById("numWordBreak");e&&(e.value="2"),t&&(t.value="7")},[]),(0,n.useEffect)(()=>{m.forEach((e,t)=>{e.lang.includes("en-US")&&d(t)})},[m]);let w=e=>{var t=document.getElementById(`${e}`);t&&("block"===t.style.display||""===t.style.display)?t.style.display="none":t&&(t.style.display="block")},x=()=>{let e=document.getElementById("inputTxt"),t=e?e.value:"";o=(t=(0,l.replaceArr)(t,[",","?","(",")","!","—","-","=",'"','"',"\n",";"],".")).split("."),c=-1,f(""),j(),e&&(e.style.display="none"),b.current?.focus()},S=e=>/^-?[0-9]+$/.test(e+""),k=e=>{let t=(e=e.trim()).split(":");return!!(2===t.length&&S(t[0])&&S(t[0]))},j=()=>{a.default.isEmpty(o)&&(x(),a.default.isEmpty(o))||(c=C(c),E(u),u=(u=o[c].trim()).replaceAll("  "," "),N())},C=e=>((e+=1)>=o.length&&(e=0),a.default.isEmpty(o[e])?C(e):e),N=()=>{L(u)},B=()=>{let e=document.getElementById("answer"),t=e?e.value:"";if((0,l.isEqualStr)(u,t,!0)){let n=(0,r.validateArrStrCheck)(t,u,0);f((0,r.arrStrCheckToStr)(n)),j(),e&&(e.value="")}else{let e=(0,r.validateArrStrCheck)(t,u,0),n=(0,r.validateArrStrCheck)(t,u,1),s=(0,r.validateArrStrCheck)(t,u,2),i=e;I(i)<I(n)&&(i=n),I(i)<I(s)&&(i=s),f((0,r.arrStrCheckToStr)(i))}},I=e=>{let t=0;for(let n=0;n<e.length;n++)e[n].type===r.TYPE_CORRECT&&(t+=1);return t},T=()=>{console.log("ds");let e=document.getElementById("numbWord")?.value||"2",t=A(),n=(0,l.getPosition)(t," ",Number(e));n>0?L(t.substring(0,n)):L(t)},A=()=>{let e=document.getElementById("answer")?.value||"",t=0,n=(0,r.validateArrStrCheck)(e,u,0);for(let e=0;e<n.length;e++)if(a.default.isEqual(n[e].type,r.TYPE_WRONG)){t=e;break}let s=u.substring(0,t).lastIndexOf(" ");return u.substring(s,u.length)},L=e=>{var t=document.getElementById("voice")?.value||"0",n=document.getElementById("rate")?.value||"1",s=new window.SpeechSynthesisUtterance;s.text=e,s.rate=Number(n),s.voice=m[Number(t)],s.volume=1,h(s)};return(0,t.jsxs)("div",{className:"container-left listen-prac",children:[(0,t.jsxs)("div",{id:"control",children:[(0,t.jsx)("textarea",{id:"inputTxt",className:"area-input",onKeyDown:e=>{"PageUp"===e.nativeEvent.code&&(w("inputTxt"),b.current?.focus()),"PageDown"===e.nativeEvent.code&&(w("control"),b.current?.focus())}}),(0,t.jsx)("br",{}),(0,t.jsx)("button",{className:"common-btn inline",id:"hideBtn",onClick:()=>w("inputTxt"),children:(0,t.jsx)(s.FaEyeSlash,{})}),(0,t.jsx)("span",{children:" "}),(0,t.jsx)("button",{className:"common-btn inline",id:"Start",onClick:()=>x(),children:"Start"}),(0,t.jsx)("button",{className:"common-btn inline",onClick:()=>(()=>{let e=document.getElementById("inputTxt"),t=e?e.value:"",n="";{let e=t.split("\n");for(let t=0;t<e.length;t++)k(e[t])||(n+=`${e[t]} `)}n=(0,l.replaceArr)(n,["[","]",",","?","(",")","!","—","-",".","”","“","\n",";","  "]," ");let s=document.getElementById("numWordBreak"),i=s?s.value:"7",r="",a=0;for(let e=0;e<n.length;e++){if(" "===n[e]&&++a>=Number(i)){r+="*",a=0;continue}r+=n[e]}console.log(o=r.split("*")),c=-1,f(""),j(),e&&(e.style.display="none"),b.current?.focus()})(),children:"St2"}),(0,t.jsx)("input",{id:"numWordBreak",className:"width-30"}),(0,t.jsx)("span",{children:" "}),(0,t.jsxs)("select",{className:"common-btn inline width-120 ",id:"voice",name:"voice",value:e||"",onChange:e=>{d(Number(e.target.value))},children:[(0,t.jsx)("option",{value:"",children:"Default"}),m.map((e,n)=>(0,t.jsx)("option",{value:n,children:`${e.lang} - ${e.name}`},e.voiceURI))]}),(0,t.jsx)("input",{id:"numbWord",className:"width-30"}),(0,t.jsx)("span",{children:" "}),(0,t.jsxs)("div",{className:"mobile",children:[(0,t.jsx)("button",{className:"common-btn inline",onClick:()=>B(),children:"c"}),(0,t.jsx)("span",{children:" "}),(0,t.jsx)("button",{className:"common-btn inline",onClick:()=>T(),children:"ci"}),(0,t.jsx)("span",{children:" "}),(0,t.jsx)("button",{className:"common-btn inline",onClick:()=>L(A()),children:"ce"})]}),(0,t.jsx)("br",{}),(0,t.jsx)("input",{className:"width-220 range-color",type:"range",min:"0.2",max:"1.5",defaultValue:"1",step:"0.1",id:"rate",onChange:e=>{v(Number(e.target.value))}}),(0,t.jsx)("span",{className:"rate-value",children:p}),(0,t.jsxs)("div",{className:"tooltip",children:["?",(0,t.jsxs)("span",{className:"tooltiptext",children:["Enter :check",(0,t.jsx)("br",{}),"ShiftLeft: hint 1 letter",(0,t.jsx)("br",{}),"ControlLeft: correct 1 letter",(0,t.jsx)("br",{}),"Insert: speak all",(0,t.jsx)("br",{}),"ShiftRight: speak error word -",">"," end",(0,t.jsx)("br",{}),"ControlRight: speak error word -",">"," i",(0,t.jsx)("br",{}),"End: next question",(0,t.jsx)("br",{}),"Home: start",(0,t.jsx)("br",{}),"PageUp: hide txt input",(0,t.jsx)("br",{}),"PageDown: hide all",(0,t.jsx)("br",{}),"ArrowDown: speak last"," "]})]}),(0,t.jsx)("br",{})]}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:g}}),(0,t.jsx)("br",{}),(0,t.jsx)("input",{type:"text",id:"answer",ref:b,onKeyDown:e=>(e=>{if(console.log(e.nativeEvent.code),"Enter"===e.key&&B(),"ShiftLeft"===e.nativeEvent.code){let e=(0,r.genHintStrAns)("answer",u);f((0,r.arrStrCheckToStr)(e))}if("ControlLeft"===e.nativeEvent.code){let e=document.getElementById("answer")?.value||"";(0,r.autoCorrectLetter)("answer",u);let t=document.getElementById("answer")?.value||"";if(a.default.isEqual(e,t)&&e.length<u.length){let t=e.length;e+=u.substring(t,t+1);let n=document.getElementById("answer");n&&(n.value=e)}}"Insert"===e.nativeEvent.code&&N(),"End"===e.nativeEvent.code&&j(),"Home"===e.nativeEvent.code&&x(),"PageUp"===e.nativeEvent.code&&w("inputTxt"),"PageDown"===e.nativeEvent.code&&w("control"),"ArrowDown"===e.nativeEvent.code&&L(y),"ShiftRight"===e.nativeEvent.code&&L(A()),"ControlRight"===e.nativeEvent.code&&T()})(e)}),(0,t.jsx)("br",{})]})]})}],17953)}]);